package com.example.emo;

import android.os.Bundle;
import android.text.method.LinkMovementMethod; // Добавлен импорт
import android.widget.TextView;
import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.Toolbar;

import io.noties.markwon.Markwon; // Добавлен импорт

public class TermsActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_terms);

        // Настройка Toolbar
        Toolbar toolbar = findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        // Включаем стрелку возврата
        if (getSupportActionBar() != null) {
            getSupportActionBar().setDisplayHomeAsUpEnabled(true);
            getSupportActionBar().setDisplayShowHomeEnabled(true);
        }

        TextView termsTextView = findViewById(R.id.terms_content); // Убедитесь, что ID правильный

        // Получаем экземпляр Markwon
        final Markwon markwon = Markwon.create(this);

        // Получаем Markdown текст из ресурсов
        // String markdownText = getString(R.string.terms_content_markdown); // Раскомментируйте, если используете strings.xml

        // ИЛИ Используем текст напрямую (для примера)
        String markdownText = "## Пользовательское Соглашение приложения \"Эмоции Гид\"\n\n" +
            "**Дата последнего обновления:** 05.04.2025\n\n" +
            "Пожалуйста, внимательно ознакомьтесь с настоящими Условиями использования (далее – \"Условия\") перед использованием мобильного приложения \"Эмоции Гид\" (далее – \"Приложение\").\n\n" +
            "**1. Принятие Условий**\n\n" +
            "Используя Приложение, вы подтверждаете, что прочитали, поняли и полностью принимаете настоящие Условия. Если вы не согласны с какими-либо из этих Условий, пожалуйста, не используйте Приложение.\n\n" +
            "**2. Описание Приложения**\n\n" +
            "Приложение \"Эмоции Гид\" представляет собой инструмент для самостоятельного отслеживания пользователем своего эмоционального состояния и получения общих рекомендаций, основанных на введенных данных и общедоступных практиках.\n\n" +
            "**3. Отказ от медицинской ответственности**\n\n" +
            "*   **ВАЖНОЕ УВЕДОМЛЕНИЕ:** Приложение **НЕ является** медицинским изделием или инструментом для диагностики психических или иных заболеваний.\n" +
            "*   Информация, алгоритмы и рекомендации, предоставляемые Приложением, носят исключительно **информационно-ознакомительный и рекомендательный характер** и **НЕ заменяют** профессиональную медицинскую, психологическую или психиатрическую консультацию, диагностику или лечение.\n" +
            "*   Всегда обращайтесь за консультацией к квалифицированному медицинскому специалисту по любым вопросам, касающимся вашего здоровья или психического состояния. Никогда не пренебрегайте профессиональной медицинской помощью и не откладывайте обращение к врачу из-за информации, полученной в Приложении.\n" +
            "*   Приложение не предназначено для использования в экстренных ситуациях или при наличии суицидальных мыслей. В таких случаях немедленно обратитесь за профессиональной помощью или позвоните по телефону экстренной службы.\n\n" +
            "**4. Ограничение ответственности**\n\n" +
            "*   Вы используете Приложение и предоставляемую им информацию исключительно **на свой страх и риск**.\n" +
            "*   Разработчики Приложения не несут ответственности за точность, полноту или полезность какой-либо информации, представленной в Приложении.\n" +
            "*   Разработчики Приложения не несут ответственности за любые прямые или косвенные убытки, ущерб (включая моральный), возникшие в результате использования или невозможности использования Приложения, или в результате действий, предпринятых на основе информации из Приложения.\n\n" +
            "**5. Конфиденциальность и Данные**\n\n" +
            "Сбор, обработка и использование ваших персональных данных регулируются нашей [**Политикой Конфиденциальности**](https://lambert333.github.io/emotions_guide/). Пожалуйста, ознакомьтесь с ней. Используя Приложение, вы соглашаетесь с условиями сбора и обработки данных, описанными в Политике Конфиденциальности.\n\n" +
            "**6. Интеллектуальная собственность**\n\n" +
            "Все права на Приложение, включая код, дизайн, тексты и другие компоненты, принадлежат разработчикам Приложения или используются на законных основаниях.\n\n" +
            "**7. Изменение Условий**\n\n" +
            "Мы оставляем за собой право в любое время изменять или обновлять настоящие Условия. Мы рекомендуем вам периодически просматривать эту страницу для ознакомления с актуальными Условиями. Продолжение использования Приложения после внесения изменений означает ваше согласие с обновленными Условиями.\n\n" +
            "**8. Контактная информация**\n\n" +
            "Если у вас есть вопросы относительно настоящих Условий, пожалуйста, свяжитесь с нами: dementjew.vania2016@yandex.ru";


        // Устанавливаем отрендеренный Markdown в TextView
        markwon.setMarkdown(termsTextView, markdownText);

        // Делаем ссылки кликабельными (важно для Политики Конфиденциальности)
        termsTextView.setMovementMethod(LinkMovementMethod.getInstance());
    }
    @Override
    public boolean onSupportNavigateUp() {
        finish(); // Закрываем активность и возвращаемся назад
        return true;
    }
}